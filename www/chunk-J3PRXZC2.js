import{a as ne}from"./chunk-5BMMSLT3.js";import{a as L,c as J,e as K,n as Q,p as W,r as X,s as Z,w as ee,y as te}from"./chunk-FVXLI4PG.js";import{a as H}from"./chunk-RQWX2EG2.js";import{a as G}from"./chunk-RFZUWG4Y.js";import{a as q}from"./chunk-26JPKIWI.js";import{$ as T,A as k,C as s,D as r,E as l,Ha as j,I as x,J as f,K as m,Oa as V,Pa as A,Qa as D,S as u,T as E,U as C,Ua as R,Xa as Y,Z as z,_ as U,ba as F,bb as B,ha as N,j as h,k as v,pa as $,q as w,r as a,s as g,u as S,x as p,z as d}from"./chunk-W6P4ETXR.js";import"./chunk-KI5M7U44.js";import"./chunk-VD3IFDEY.js";import"./chunk-F6FNI2JN.js";import"./chunk-NBIXKWD5.js";import"./chunk-6BU23L3N.js";import"./chunk-W2DKFL3W.js";import"./chunk-GFAQE7C7.js";import"./chunk-4U6PRYVA.js";import"./chunk-JGTGHJ4P.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-D4VGNZLR.js";import"./chunk-JHLW7V75.js";import"./chunk-SV7S5NYR.js";import{a as M,b as I,f as y}from"./chunk-RW4GY4BD.js";function oe(o,c){if(o&1){let i=x();s(0,"ion-button",24),f("click",function(){h(i);let e=m().$implicit,n=m(2);return v(n.inscribirse(e))}),l(1,"ion-icon",25),u(2," Inscribirse "),r()}}function ie(o,c){if(o&1){let i=x();s(0,"ion-button",26),f("click",function(){h(i);let e=m().$implicit,n=m(2);return v(n.ver_curso(e))}),l(1,"ion-icon",27),u(2," Continuar "),r()}}function re(o,c){if(o&1&&(s(0,"ion-col",11)(1,"div",12)(2,"div",13),l(3,"img",14)(4,"div",15),r(),s(5,"div",16)(6,"div",17)(7,"h2"),u(8),r(),s(9,"p",18),l(10,"ion-icon",19),u(11),r(),s(12,"p",18),l(13,"ion-icon",20),u(14),r(),s(15,"p",18),l(16,"ion-icon",21),u(17),r(),p(18,oe,3,0,"ion-button",22)(19,ie,3,0,"ion-button",23),r()()()()),o&2){let i=c.$implicit,t=c.index,e=m(2);a(),k("animation-delay",t*.1+"s"),d("ngClass",e.getCursoClass(i.nombre)),a(2),d("src",i.url_imagen||"assets/placeholder-curso.jpg",w)("alt",i.nombre),a(5),E(i.nombre),a(3),C(" Duraci\xF3n: ",e.formatDuration(i.duracion)," "),a(3),C(" Autor: ",i.autor.nombre," "),a(3),C(" Inscritos: ",(i.inscripciones==null?null:i.inscripciones.length)||0," "),a(),d("ngIf",i.puedeInscribirse),a(),d("ngIf",!i.puedeInscribirse)}}function se(o,c){if(o&1&&(s(0,"div",9)(1,"ion-grid")(2,"ion-row"),p(3,re,20,11,"ion-col",10),r()()()),o&2){let i=m();a(3),d("ngForOf",i.cursos)}}function ce(o,c){o&1&&(s(0,"div",28),l(1,"ion-icon",29),s(2,"h3"),u(3,"No hay cursos disponibles"),r(),s(4,"p"),u(5,"Vuelve m\xE1s tarde para ver nuevos cursos"),r()())}function ae(o,c){o&1&&(s(0,"div",30)(1,"p"),u(2,"No hay cursos disponibles"),r()())}var Pe=(()=>{let c=class c{constructor(t,e,n,_){this.apiService=t,this.cursoService=e,this.secureAuthService=n,this.router=_,this.cursos=[],this.isModalOpen=!1,this.nuevoCurso={nombre:"",duracion:null},this.currentUserId=0,this.selectedFile=null,this.imagePreview=null,L({refreshOutline:Z,timeOutline:ee,personOutline:W,peopleOutline:Q,addOutline:J,playOutline:X,bookOutline:K})}ngOnInit(){return y(this,null,function*(){if(this.currentUserId=yield this.secureAuthService.getUserId(),!this.currentUserId){console.warn("No se pudo obtener el ID del usuario");return}console.log("Usuario actual:",this.currentUserId),this.get_cursos()})}get_cursos(){this.apiService.getCursos().subscribe({next:t=>{this.cursos=t.map(e=>{var O,P;let n=this.currentUserId!==((O=e.autor)==null?void 0:O.id),_=!((P=e.inscripciones)!=null&&P.some(b=>(typeof b.usuario_id=="object"?b.usuario_id.id:b.usuario_id)===this.currentUserId));return I(M({},e),{puedeInscribirse:n&&_})}),console.log(this.cursos)},error:t=>{console.error("Error al obtener cursos:",t)}})}getCursoClass(t){let e=t.toLowerCase();return e.includes("matem\xE1tica")||e.includes("matematica")?"matematica":e.includes("ciencia")||e.includes("biolog\xEDa")||e.includes("f\xEDsica")||e.includes("qu\xEDmica")?"ciencias":e.includes("historia")||e.includes("geograf\xEDa")||e.includes("sociales")?"historia":""}formatDuration(t){if(t<60)return`${t} minutos`;{let e=Math.floor(t/60),n=t%60;return n===0?`${e} ${e===1?"hora":"horas"}`:`${e}h ${n}min`}}inscribirse(t){this.apiService.enrollUser(t.id).subscribe({next:e=>{console.log("Usuario inscrito:",e),this.ver_curso(t)},error:e=>{console.error("Error al inscribir:",e)}})}ver_curso(t){this.cursoService.setCurso(t),this.router.navigate(["/curso"])}};c.\u0275fac=function(e){return new(e||c)(g(H),g(ne),g(q),g(N))},c.\u0275cmp=S({type:c,selectors:[["app-cursos"]],decls:13,vars:4,consts:[[3,"fullscreen"],[1,"container"],[1,"header-container"],[1,"title"],[3,"click"],["name","refresh-outline"],["class","cursos-list",4,"ngIf"],["class","no-cursos",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"cursos-list"],["size","12","size-md","6","size-lg","4",4,"ngFor","ngForOf"],["size","12","size-md","6","size-lg","4"],[1,"curso-card",3,"ngClass"],[1,"curso-image-container"],["loading","lazy",1,"curso-image",3,"src","alt"],[1,"curso-blur-overlay"],[1,"curso-info-box"],[1,"curso-content"],[1,"curso-subtitle"],["name","time-outline"],["name","person-outline"],["name","people-outline"],["expand","block","fill","solid","color","primary","class","inscribirse-btn",3,"click",4,"ngIf"],["expand","block","fill","solid","color","secondary","class","continuar-btn",3,"click",4,"ngIf"],["expand","block","fill","solid","color","primary",1,"inscribirse-btn",3,"click"],["name","add-outline","slot","start"],["expand","block","fill","solid","color","secondary",1,"continuar-btn",3,"click"],["name","play-outline","slot","start"],[1,"no-cursos"],["name","book-outline","size","large"],[1,"empty-state"]],template:function(e,n){e&1&&(l(0,"app-header"),s(1,"ion-content",0)(2,"div",1)(3,"div",2)(4,"ion-text",3)(5,"h1"),u(6,"Cursos"),r()(),s(7,"ion-button",4),f("click",function(){return n.get_cursos()}),l(8,"ion-icon",5),r()(),p(9,se,4,1,"div",6)(10,ce,6,0,"div",7)(11,ae,3,0,"div",8),r()(),l(12,"app-tab-bar")),e&2&&(a(),d("fullscreen",!0),a(8),d("ngIf",n.cursos&&n.cursos.length>0),a(),d("ngIf",!n.cursos||n.cursos.length===0),a(),d("ngIf",!n.cursos||n.cursos.length===0))},dependencies:[F,z,U,T,$,G,te,A,Y,j,B,D,R,V],styles:[".cursos-list[_ngcontent-%COMP%]{padding:16px}.cursos-list[_ngcontent-%COMP%]   .curso-card[_ngcontent-%COMP%]{position:relative;height:280px;border-radius:16px;overflow:hidden;margin-bottom:20px;box-shadow:0 8px 24px #00000026;transition:transform .3s ease,box-shadow .3s ease;cursor:pointer}.cursos-list[_ngcontent-%COMP%]   .curso-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 32px #0003}.cursos-list[_ngcontent-%COMP%]   .curso-card[_ngcontent-%COMP%]   .curso-image-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;overflow:hidden}.cursos-list[_ngcontent-%COMP%]   .curso-card[_ngcontent-%COMP%]   .curso-image-container[_ngcontent-%COMP%]   .curso-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.cursos-list[_ngcontent-%COMP%]   .curso-card[_ngcontent-%COMP%]   .curso-image-container[_ngcontent-%COMP%]   .curso-blur-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.cursos-list[_ngcontent-%COMP%]   .curso-card[_ngcontent-%COMP%]   .curso-info-box[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:24px 20px 20px;color:#333}.cursos-list[_ngcontent-%COMP%]   .curso-card[_ngcontent-%COMP%]   .curso-info-box[_ngcontent-%COMP%]   .curso-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin:0 0 8px;color:#fff;line-height:1.3}.cursos-list[_ngcontent-%COMP%]   .curso-card[_ngcontent-%COMP%]   .curso-info-box[_ngcontent-%COMP%]   .curso-content[_ngcontent-%COMP%]   .curso-subtitle[_ngcontent-%COMP%]{font-size:.9rem;margin:4px 0;color:#ffffffe6;font-weight:500;font-weight:600}.cursos-list[_ngcontent-%COMP%]   .curso-card[_ngcontent-%COMP%]:hover   .curso-image[_ngcontent-%COMP%]{transform:scale(1.05)}.cursos-list[_ngcontent-%COMP%]   .curso-card.ciencias[_ngcontent-%COMP%]   .curso-blur-overlay[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf50cc,#4caf5066,#4caf50e6)}.cursos-list[_ngcontent-%COMP%]   .curso-card.historia[_ngcontent-%COMP%]   .curso-blur-overlay[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9c27b0cc,#9c27b066,#9c27b0e6)}.cursos-list[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{--ion-grid-padding: 0}.cursos-list[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:8px}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.curso-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}@media (max-width: 768px){.cursos-list[_ngcontent-%COMP%]   .curso-card[_ngcontent-%COMP%]{height:240px}.cursos-list[_ngcontent-%COMP%]   .curso-card[_ngcontent-%COMP%]   .curso-info-box[_ngcontent-%COMP%]{padding:20px 16px 16px}.cursos-list[_ngcontent-%COMP%]   .curso-card[_ngcontent-%COMP%]   .curso-info-box[_ngcontent-%COMP%]   .curso-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.cursos-list[_ngcontent-%COMP%]   .curso-card[_ngcontent-%COMP%]   .curso-info-box[_ngcontent-%COMP%]   .curso-subtitle[_ngcontent-%COMP%]{font-size:.85rem}}"]});let o=c;return o})();export{Pe as CursosPage};
