import{a as W}from"./chunk-5BMMSLT3.js";import{a as H,g as R,h as N,j as U,n as q,q as A,t as G,v as J,w as K,y as Q}from"./chunk-FVXLI4PG.js";import{a as D}from"./chunk-RFZUWG4Y.js";import{$ as S,B as M,C as t,D as o,E as c,I as _,Ia as E,J as v,Ja as z,K as m,Ka as F,La as T,Ma as $,Na as B,Pa as L,S as d,T as g,Ta as j,U as u,V as P,_ as I,ba as y,bb as V,ha as k,j as h,k as x,pa as w,q as b,r as n,s as C,u as O,x as f,z as p}from"./chunk-W6P4ETXR.js";import"./chunk-KI5M7U44.js";import"./chunk-F6FNI2JN.js";import"./chunk-NBIXKWD5.js";import"./chunk-6BU23L3N.js";import"./chunk-W2DKFL3W.js";import"./chunk-GFAQE7C7.js";import"./chunk-4U6PRYVA.js";import"./chunk-JGTGHJ4P.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-D4VGNZLR.js";import"./chunk-JHLW7V75.js";import"./chunk-SV7S5NYR.js";import"./chunk-RW4GY4BD.js";function X(s,l){if(s&1){let i=_();t(0,"div",22),c(1,"div",23),t(2,"div",24),v("click",function(){let a=h(i).$implicit,r=m(3);return x(r.selectLesson(a))}),c(3,"ion-icon",25),t(4,"div",26)(5,"span",11),d(6),o(),t(7,"div",27)(8,"ion-chip",28),c(9,"ion-icon",5),t(10,"ion-label"),d(11),o()(),t(12,"ion-chip",29),c(13,"ion-icon",30),t(14,"ion-label"),d(15),o()()(),t(16,"p",31),d(17),o()()()()}if(s&2){let i=l.$implicit,e=l.last;n(),M("last-lesson",e),n(5),g(i.nombre),n(5),u("",i.duracion," min"),n(4),u("",i.creditos," pts"),n(2),g(i.tema)}}function Y(s,l){if(s&1&&(t(0,"div",20),f(1,X,18,6,"div",21),o()),s&2){let i=m().$implicit,e=m();n(),p("ngForOf",e.getLecciones(i))}}function Z(s,l){if(s&1){let i=_();t(0,"div",14),c(1,"div",15),t(2,"div",16),v("click",function(){let a=h(i).$implicit,r=m();return x(r.toggleChapter(a.id))}),c(3,"ion-icon",17)(4,"ion-icon",18),t(5,"span",11),d(6),o()(),f(7,Y,2,1,"div",19),o()}if(s&2){let i=l.$implicit,e=m();n(3),p("name",e.isChapterExpanded(i.id)?"chevron-down-outline":"chevron-forward-outline"),n(3),P("Cap. ",i.id,": ",i.nombre,""),n(),p("ngIf",e.isChapterExpanded(i.id))}}var xe=(()=>{let l=class l{constructor(e,a){this.router=e,this.cursoService=a,this.curso=this.cursoService.getCurso(),this.expandedChapters=new Set,H({timeOutline:K,peopleOutline:q,schoolOutline:G,libraryOutline:U,playCircleOutline:A,starOutline:J,chevronDownOutline:R,chevronForwardOutline:N})}ngOnInit(){this.curso=this.cursoService.getCurso(),console.log("Curso recibido:",this.curso),this.curso||this.router.navigate(["/cursos"])}getCapitulos(){return Object.values(this.curso.capitulos)}getLecciones(e){return Object.values(e.lecciones)}getLeccionesCount(e){return Object.keys(e.lecciones).length}toggleChapter(e){this.expandedChapters.has(e)?this.expandedChapters.delete(e):this.expandedChapters.add(e)}isChapterExpanded(e){return this.expandedChapters.has(e)}selectLesson(e){console.log("Lecci\xF3n seleccionada:",e)}getRecursosCount(e){return Object.keys(e.recursos).length}formatDuration(e){if(e<60)return`${e} min`;let a=Math.floor(e/60),r=e%60;return r>0?`${a}h ${r}m`:`${a}h`}goBack(){this.cursoService.clearCurso(),this.router.navigate(["/cursos"])}};l.\u0275fac=function(a){return new(a||l)(C(k),C(W))},l.\u0275cmp=O({type:l,selectors:[["app-curso"]],decls:33,vars:8,consts:[[3,"fullscreen"],[1,"container"],["alt","Imagen del curso",3,"src"],[1,"curso-stats"],["color","primary"],["name","time-outline"],["color","secondary"],["name","people-outline"],[1,"tree-structure"],[1,"tree-node","root-node"],["name","school-outline",1,"node-icon"],[1,"node-title"],[1,"chapters-container"],["class","chapter-branch",4,"ngFor","ngForOf"],[1,"chapter-branch"],[1,"tree-connector"],[1,"tree-node","chapter-node",3,"click"],[1,"expand-icon",3,"name"],["name","library-outline",1,"node-icon"],["class","lessons-container",4,"ngIf"],[1,"lessons-container"],["class","lesson-branch",4,"ngFor","ngForOf"],[1,"lesson-branch"],[1,"lesson-connector"],[1,"tree-node","lesson-node",3,"click"],["name","play-circle-outline",1,"node-icon"],[1,"lesson-content"],[1,"lesson-details"],["size","small","color","tertiary"],["size","small","color","warning"],["name","star-outline"],[1,"lesson-theme"]],template:function(a,r){a&1&&(t(0,"ion-content",0),c(1,"app-header"),t(2,"div",1)(3,"ion-card"),c(4,"img",2),t(5,"ion-card-header")(6,"ion-card-title"),d(7),o(),t(8,"ion-card-subtitle"),d(9),o()(),t(10,"ion-card-content")(11,"div",3)(12,"ion-chip",4),c(13,"ion-icon",5),t(14,"ion-label"),d(15),o()(),t(16,"ion-chip",6),c(17,"ion-icon",7),t(18,"ion-label"),d(19),o()()()()(),t(20,"ion-card")(21,"ion-card-header")(22,"ion-card-title"),d(23,"Contenido del Curso"),o()(),t(24,"ion-card-content")(25,"div",8)(26,"div",9),c(27,"ion-icon",10),t(28,"span",11),d(29),o()(),t(30,"div",12),f(31,Z,8,4,"div",13),o()()()()(),c(32,"app-tab-bar"),o()),a&2&&(p("fullscreen",!0),n(4),p("src",r.curso.url_imagen,b),n(3),g(r.curso.nombre),n(2),u("Por ",r.curso.autor.nombre,""),n(6),u("",r.curso.duracion," min"),n(4),u("",r.curso.inscripciones.length," inscritos"),n(10),g(r.curso.nombre),n(2),p("ngForOf",r.getCapitulos()))},dependencies:[z,E,F,$,T,B,V,j,Q,D,L,y,I,S,w],styles:['.container[_ngcontent-%COMP%]{padding:16px}.curso-stats[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px}.tree-structure[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.tree-node[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;margin:4px 0;border-radius:8px;cursor:pointer;transition:all .3s ease;position:relative}.root-node[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;font-weight:700;font-size:1.1rem;margin-bottom:20px}.chapter-node[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #e9ecef;margin-left:20px;font-weight:600;color:#495057}.chapter-node[_ngcontent-%COMP%]:hover{background:#e9ecef;border-color:#007bff}.lesson-node[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;margin-left:60px;box-shadow:0 2px 4px #0000001a}.lesson-node[_ngcontent-%COMP%]:hover{background:#f8f9ff;border-color:#007bff;transform:translate(4px)}.node-icon[_ngcontent-%COMP%]{margin-right:12px;font-size:1.2rem}.expand-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:1rem;transition:transform .3s ease}.node-title[_ngcontent-%COMP%]{flex:1;font-size:1rem}.lessons-count[_ngcontent-%COMP%]{margin-left:auto;font-size:.8rem}.lesson-content[_ngcontent-%COMP%]{flex:1}.lesson-details[_ngcontent-%COMP%]{display:flex;gap:6px;margin:6px 0}.lesson-theme[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;margin:4px 0 0;font-style:italic}.chapters-container[_ngcontent-%COMP%], .chapter-branch[_ngcontent-%COMP%]{position:relative}.tree-connector[_ngcontent-%COMP%]{position:absolute;left:10px;top:0;bottom:0;width:2px;background:#dee2e6}.tree-connector[_ngcontent-%COMP%]:before{content:"";position:absolute;top:24px;left:0;width:20px;height:2px;background:#dee2e6}.lessons-container[_ngcontent-%COMP%], .lesson-branch[_ngcontent-%COMP%]{position:relative}.lesson-connector[_ngcontent-%COMP%]{position:absolute;left:-30px;top:0;bottom:0;width:2px;background:#dee2e6}.lesson-connector[_ngcontent-%COMP%]:before{content:"";position:absolute;top:24px;left:0;width:20px;height:2px;background:#dee2e6}.lesson-connector.last-lesson[_ngcontent-%COMP%]{height:24px}.lesson-connector.last-lesson[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:2px;height:20px;background:#fff}ion-chip[_ngcontent-%COMP%]{--color: inherit}ion-chip[size=small][_ngcontent-%COMP%]{height:24px;font-size:.75rem}ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.9rem;margin-right:4px}']});let s=l;return s})();export{xe as CursoPage};
