import{a as oe}from"./chunk-GXBX5Y2Y.js";import{a as ie}from"./chunk-4TYS3M3B.js";import{F as K,M as Q,P as W,Q as X,U as Z,W as ee,Y as te,a as H,ba as ne,l as G,m as B,t as J}from"./chunk-4BMJYP2H.js";import{a as q}from"./chunk-JZDHSOL4.js";import{c as x,d as u,f as p,g as f,h as I,i as w}from"./chunk-WOUMSPPK.js";import{$ as E,A as k,D as b,F as m,H as C,I as t,J as r,K as l,O as P,P as M,Q as g,Va as Y,Wa as j,Xa as L,Y as d,Ya as $,Z as _,Za as F,_ as h,_a as R,ab as U,eb as N,ia as T,ja as D,k as y,l as O,la as z,ob as V,sa as A,u as S,w as n,y as v}from"./chunk-VB7IR2J7.js";import"./chunk-KI5M7U44.js";import"./chunk-F6FNI2JN.js";import"./chunk-NBIXKWD5.js";import"./chunk-6BU23L3N.js";import"./chunk-W2DKFL3W.js";import"./chunk-GFAQE7C7.js";import"./chunk-4U6PRYVA.js";import"./chunk-JGTGHJ4P.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-D4VGNZLR.js";import"./chunk-JHLW7V75.js";import"./chunk-SV7S5NYR.js";import"./chunk-RW4GY4BD.js";function re(s,c){if(s&1&&(t(0,"div",35),l(1,"ion-icon",36),t(2,"span"),d(3),r()()),s&2){let i=g().$implicit,e=g(3);n(3),h("",e.getRecursosCount(i)," recursos")}}function ae(s,c){if(s&1){let i=P();t(0,"div",24),l(1,"div",25),t(2,"div",26),M("click",function(){let o=y(i).$implicit,a=g(3);return O(a.selectLesson(o))}),l(3,"ion-icon",27),t(4,"div",28)(5,"span",11),d(6),r(),t(7,"div",29)(8,"div",30),l(9,"ion-icon",5),t(10,"span"),d(11),r()(),t(12,"div",31),l(13,"ion-icon",32),t(14,"span"),d(15),r()(),b(16,re,4,1,"div",33),r(),t(17,"p",34),d(18),r()()()()}if(s&2){let i=c.$implicit,e=c.last,o=g(3);n(),C("last-lesson",e),n(5),_(i.nombre),n(5),_(o.formatDuration(i.duracion)),n(4),h("",i.creditos," pts"),n(),m("ngIf",o.getRecursosCount(i)>0),n(2),_(i.tema)}}function se(s,c){if(s&1&&(t(0,"div",22),b(1,ae,19,7,"div",23),r()),s&2){let i=g().$implicit,e=g();m("@expandCollapse",void 0)("@staggerIn",void 0),n(),m("ngForOf",e.getLecciones(i))}}function ce(s,c){if(s&1){let i=P();t(0,"div",14),l(1,"div",15),t(2,"div",16),M("click",function(){let o=y(i).$implicit,a=g();return O(a.toggleChapter(o.id))}),l(3,"ion-icon",17)(4,"ion-icon",18),t(5,"div",19)(6,"span",11),d(7),r(),t(8,"span",20),d(9),r()()(),b(10,se,2,3,"div",21),r()}if(s&2){let i=c.$implicit,e=c.last,o=g();n(),C("last-connector",e),n(),C("expanded",o.isChapterExpanded(i.id)),n(),m("name",o.isChapterExpanded(i.id)?"chevron-down-outline":"chevron-forward-outline"),n(4),E("Cap. ",i.id,": ",i.nombre,""),n(2),h("",o.getLeccionesCount(i)," lecciones"),n(),m("ngIf",o.isChapterExpanded(i.id))}}var je=(()=>{let c=class c{constructor(e,o,a){this.leccionService=e,this.router=o,this.cursoService=a,this.curso=this.cursoService.getCurso(),this.expandedChapters=new Set,H({schoolOutline:Z,timeOutline:te,peopleOutline:Q,libraryOutline:K,documentTextOutline:J,playCircleOutline:W,starOutline:ee,playOutline:X,chevronForwardOutline:B,chevronDownOutline:G})}ngOnInit(){this.curso=this.cursoService.getCurso(),console.log("Curso recibido:",this.curso),this.curso||this.router.navigate(["/cursos"])}getCapitulos(){return Object.values(this.curso.capitulos)}getLecciones(e){return Object.values(e.lecciones)}getLeccionesCount(e){return Object.keys(e.lecciones).length}toggleChapter(e){this.expandedChapters.has(e)?this.expandedChapters.delete(e):this.expandedChapters.add(e)}isChapterExpanded(e){return this.expandedChapters.has(e)}selectLesson(e){this.leccionService.setLeccion(e),console.log("Lecci\xF3n seleccionada:",this.leccionService.getLeccionId()),this.router.navigate(["/leccion"])}getRecursosCount(e){return Object.keys(e.recursos).length}formatDuration(e){if(e<60)return`${e} min`;let o=Math.floor(e/60),a=e%60;return a>0?`${o}h ${a}m`:`${o}h`}goBack(){this.cursoService.clearCurso(),this.router.navigate(["/cursos"])}};c.\u0275fac=function(o){return new(o||c)(v(ie),v(A),v(oe))},c.\u0275cmp=k({type:c,selectors:[["app-curso"]],decls:33,vars:9,consts:[[3,"fullscreen"],[1,"container"],["alt","Imagen del curso",3,"src"],[1,"curso-stats"],["color","primary"],["name","time-outline"],["color","secondary"],["name","people-outline"],[1,"tree-structure"],[1,"tree-node","root-node"],["name","school-outline",1,"node-icon"],[1,"node-title"],[1,"chapters-container"],["class","chapter-branch",4,"ngFor","ngForOf"],[1,"chapter-branch"],[1,"tree-connector"],[1,"tree-node","chapter-node",3,"click"],[1,"expand-icon",3,"name"],["name","library-outline",1,"node-icon"],[1,"chapter-content"],[1,"chapter-stats"],["class","lessons-container",4,"ngIf"],[1,"lessons-container"],["class","lesson-branch",4,"ngFor","ngForOf"],[1,"lesson-branch"],[1,"lesson-connector"],[1,"tree-node","lesson-node",3,"click"],["name","play-circle-outline",1,"node-icon"],[1,"lesson-content"],[1,"lesson-details"],[1,"lesson-chip","duration"],[1,"lesson-chip","credits"],["name","star-outline"],["class","lesson-chip resources",4,"ngIf"],[1,"lesson-theme"],[1,"lesson-chip","resources"],["name","library-outline"]],template:function(o,a){o&1&&(t(0,"ion-content",0),l(1,"app-header"),t(2,"div",1)(3,"ion-card"),l(4,"img",2),t(5,"ion-card-header")(6,"ion-card-title"),d(7),r(),t(8,"ion-card-subtitle"),d(9),r()(),t(10,"ion-card-content")(11,"div",3)(12,"ion-chip",4),l(13,"ion-icon",5),t(14,"ion-label"),d(15),r()(),t(16,"ion-chip",6),l(17,"ion-icon",7),t(18,"ion-label"),d(19),r()()()()(),t(20,"ion-card")(21,"ion-card-header")(22,"ion-card-title"),d(23,"Contenido del Curso"),r()(),t(24,"ion-card-content")(25,"div",8)(26,"div",9),l(27,"ion-icon",10),t(28,"span",11),d(29),r()(),t(30,"div",12),b(31,ce,11,9,"div",13),r()()()()(),l(32,"app-tab-bar"),r()),o&2&&(m("fullscreen",!0),n(4),m("src",a.curso.url_imagen,S),n(3),_(a.curso.nombre),n(2),h("Por ",a.curso.autor.nombre,""),n(6),h("",a.curso.duracion," min"),n(4),h("",a.curso.inscripciones.length," inscritos"),n(10),_(a.curso.nombre),n(),m("@staggerIn",void 0),n(),m("ngForOf",a.getCapitulos()))},dependencies:[ne,q,z,T,D,U,j,R,Y,L,F,$,V,N],styles:['@charset "UTF-8";.tree-structure[_ngcontent-%COMP%]{padding:16px;background:linear-gradient(135deg,#f8fafc,#e2e8f0);border-radius:12px;position:relative}.tree-node[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;border-radius:10px;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;cursor:pointer;margin:4px 0}.tree-node[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #00000026}.root-node[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;font-weight:600;font-size:1.1rem;margin-bottom:20px;box-shadow:0 4px 15px #667eea66}.root-node[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:12px;color:#ffffffe6}.chapters-container[_ngcontent-%COMP%]{position:relative;margin-left:20px}.chapter-branch[_ngcontent-%COMP%]{position:relative;margin-bottom:8px}.tree-connector[_ngcontent-%COMP%]{position:absolute;left:-20px;top:0;width:2px;height:100%;background:linear-gradient(to bottom,#cbd5e1,#e2e8f0)}.tree-connector[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-6px;top:24px;width:14px;height:2px;background:linear-gradient(to right,#cbd5e1,#e2e8f0)}.chapter-node[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f1f5f9);border:2px solid #e2e8f0;font-weight:500;position:relative;overflow:hidden}.chapter-node[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(to bottom,#3b82f6,#1d4ed8)}.chapter-node[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#fff,#eff6ff)}.expand-icon[_ngcontent-%COMP%]{font-size:1.2rem;margin-right:8px;color:#64748b;transition:transform .3s ease,color .3s ease}.chapter-node[_ngcontent-%COMP%]:hover   .expand-icon[_ngcontent-%COMP%]{color:#3b82f6;transform:scale(1.1)}.node-icon[_ngcontent-%COMP%]{font-size:1.3rem;margin-right:12px;color:#64748b;transition:color .3s ease}.chapter-node[_ngcontent-%COMP%]:hover   .node-icon[_ngcontent-%COMP%]{color:#3b82f6}.node-title[_ngcontent-%COMP%]{font-size:1rem;color:#334155;font-weight:500}.lessons-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out;transform-origin:top}.lesson-branch[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out forwards}.lesson-branch[_ngcontent-%COMP%]:nth-child(1){animation-delay:.05s}.lesson-branch[_ngcontent-%COMP%]:nth-child(2){animation-delay:.1s}.lesson-branch[_ngcontent-%COMP%]:nth-child(3){animation-delay:.15s}.lesson-branch[_ngcontent-%COMP%]:nth-child(4){animation-delay:.2s}.lesson-branch[_ngcontent-%COMP%]:nth-child(5){animation-delay:.25s}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:scaleY(0)}to{opacity:1;transform:scaleY(1)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.expand-icon[_ngcontent-%COMP%]{transition:transform .2s ease}.chapter-node.expanded[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.lessons-container[_ngcontent-%COMP%]{margin-left:30px;margin-top:12px;position:relative}.lesson-branch[_ngcontent-%COMP%]{position:relative;margin-bottom:6px}.lesson-connector[_ngcontent-%COMP%]{position:absolute;left:-30px;top:0;width:2px;height:calc(100% + 6px);background:linear-gradient(to bottom,#e2e8f0,transparent)}.lesson-connector[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-6px;top:28px;width:16px;height:2px;background:#e2e8f0}.lesson-connector.last-lesson[_ngcontent-%COMP%]{height:28px}.lesson-node[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafafa);border:1px solid #e5e7eb;border-radius:8px;padding:16px;position:relative;overflow:hidden}.lesson-node[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:3px;height:100%;background:linear-gradient(to bottom,#10b981,#059669)}.lesson-node[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#fff,#f0fdf4);border-color:#10b981;transform:translate(4px)}.lesson-node[_ngcontent-%COMP%]:hover   .node-icon[_ngcontent-%COMP%]{color:#10b981;transform:scale(1.1)}.lesson-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;width:100%}.lesson-details[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.lesson-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;border-radius:12px;font-size:.75rem;font-weight:500;background:#f1f5f9;color:#475569;border:1px solid #e2e8f0}.lesson-chip.duration[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef3c7,#fde68a);color:#92400e;border-color:#f59e0b}.lesson-chip.credits[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef7cd,#fef08a);color:#a16207;border-color:#eab308}.lesson-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.875rem}.lesson-theme[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;margin:4px 0 0;font-style:italic;line-height:1.3}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.lessons-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}@media (max-width: 768px){.tree-structure[_ngcontent-%COMP%]{padding:12px}.chapters-container[_ngcontent-%COMP%]{margin-left:16px}.lessons-container[_ngcontent-%COMP%]{margin-left:24px}.lesson-connector[_ngcontent-%COMP%]{left:-24px}.lesson-details[_ngcontent-%COMP%]{flex-direction:column;gap:4px}}.tree-node.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-color:#3b82f6}.lesson-node.completed[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;top:8px;right:12px;color:#10b981;font-weight:700;font-size:1.2rem}'],data:{animation:[x("expandCollapse",[f(":enter",[p({height:"0px",opacity:0,transform:"scaleY(0.8)",overflow:"hidden"}),u("500ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",p({height:"*",opacity:1,transform:"scaleY(1)"}))]),f(":leave",[p({overflow:"hidden"}),u("400ms cubic-bezier(0.55, 0.085, 0.68, 0.53)",p({height:"0px",opacity:0,transform:"scaleY(0.95)"}))])]),x("staggerIn",[f("* => *",[I(":enter",[p({opacity:0,transform:"translateY(20px) scale(0.95)",filter:"blur(2px)"}),w("80ms",[u("600ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",p({opacity:1,transform:"translateY(0) scale(1)",filter:"blur(0px)"}))])],{optional:!0})])]),x("smoothHover",[f("idle => hover",[u("200ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",p({transform:"translateY(-2px) scale(1.02)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)"}))]),f("hover => idle",[u("300ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",p({transform:"translateY(0) scale(1)",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"}))])]),x("bounceIn",[f(":enter",[p({opacity:0,transform:"scale(0.3) rotate(-5deg)"}),u("600ms cubic-bezier(0.68, -0.55, 0.265, 1.55)",p({opacity:1,transform:"scale(1) rotate(0deg)"}))])])]}});let s=c;return s})();export{je as CursoPage};
